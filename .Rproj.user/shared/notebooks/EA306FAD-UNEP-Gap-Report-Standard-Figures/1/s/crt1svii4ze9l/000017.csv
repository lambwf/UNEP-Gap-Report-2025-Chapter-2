"0",""
"0","## In countries where CO2 emissions decreased, what were the trends in CH4 and N2O?"
"0",""
"0","data <- data_edgar %>% "
"0","  group_by(iso,country,gas,year) %>% "
"0","  summarise(value=sum(value,na.rm=T)/1e6) %>% "
"0","  filter(year>=1990)"
"0",""
"0","data <- data %>% "
"0","  left_join(.,read.csv(""https://raw.githubusercontent.com/openclimatedata/countrygroups/main/data/g20.csv"") %>%"
"0","              select(iso=Code) %>% "
"0","              mutate(G20=""1"")) %>% "
"0","  left_join(.,read.csv(""https://raw.githubusercontent.com/openclimatedata/countrygroups/main/data/annex-one.csv"") %>%"
"0","              select(iso=Code) %>% "
"0","              mutate(AnnexI=""1""))"
"2","[38;5;232mJoining with `by = join_by(iso)`[39m
"
"2","[38;5;232mJoining with `by = join_by(iso)`[39m
"
"0","data <- data %>% "
"0","  #filter(year>=max(data$year)-9) %>% "
"0","  filter(AnnexI==1) %>% "
"0","  group_by(gas,year) %>% "
"0","  summarise(value=sum(value))"
"0",""
"0","data <- data %>% "
"0","  group_by(gas) %>% "
"0","  mutate(rel_value=value/nth(value,26))"
"0",""
"0","change <- data %>% "
"0","  filter(year>=2015) %>% "
"0","  group_by(gas) %>% "
"0","  mutate(change=growth_rate(year,value)$rate) %>% "
"0","  mutate(change=round(change*100,1)) %>% "
"0","  mutate(change=ifelse(change>0,paste0(""+"",change),paste0(change))) %>% "
"0","  mutate(change= paste0(gas,"": "",change,""%/yr"")) %>% "
"0","  filter(year==2024)"
"0",""
"0",""
"0","p1 <- data %>% ggplot(.,aes(x=year,y=rel_value,colour=gas,group=gas)) +"
"0","  geom_vline(xintercept=2015,colour=""#636363"") +"
"0","  geom_path(size=1) +"
"0","  geom_point(shape=21,fill=""white"") +"
"0","  scale_x_continuous(breaks = c(2000,2005,2010,2015,2020,2024),limits=c(2000,2024)) +"
"0","  theme_wl() +"
"0","  scale_colour_manual(values=colours_gases) +"
"0","  theme(legend.position=""none"","
"0","        axis.title = element_blank(),"
"0","        panel.grid.major.x = element_blank()) +"
"0","  labs(title=""Change in the greenhouse gas emissions of Annex I countries"","
"0","       caption=""\nâŒ‚ Data: EDGAR v10  âŒ‚ Note: GWP100 AR6"")"
"0",""
"0",""
"0","p2 <- change %>% "
"0","  ggplot(.,aes(x=1,y=rel_value,label=change,color=gas)) +"
"0","  geom_text_repel("
"0","    hjust=0,"
"0","    direction = ""y"","
"0","    point.size = NA,"
"0","    size=3.5,"
"0","    show.legend = FALSE,"
"0","    min.segment.length = Inf) +"
"0","  annotation_custom(grob = textGrob(str_wrap(""Average change since 2016:"",10), x = unit(0.1, ""npc""), y = unit(0.8, ""npc""),hjust = 0, vjust = 0,"
"0","                                    gp = gpar(col = ""#636363"", fontsize = 10, lineheight=0.8)),"
"0","                    xmin = -Inf, xmax = Inf, ymin = -Inf, ymax = Inf) +"
"0","  scale_colour_manual(values=colours_gases) +"
"0","  scale_y_continuous(limits = layer_scales(p1)$y$range$range) +"
"0","  scale_x_continuous(expand = expansion(mult = c(0, 0.01))) +"
"0","  theme_wl_empty()"
"0",""
"0","plot <- p1 + p2 + plot_layout(widths=c(8,2))"
